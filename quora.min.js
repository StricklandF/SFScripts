const scriptName="Quora";const $=MagicJS(scriptName,"INFO");!(function(){var e=typeof atob==="function";var t=typeof btoa==="function";var r=typeof Buffer==="function";var n=typeof TextDecoder==="function"?new TextDecoder():undefined;var o=typeof TextEncoder==="function"?new TextEncoder():undefined;var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var u=Array.prototype.slice.call(i);var a=(function(e){var r={};e.forEach(function(e,t){return(r[e]=t)});return r})(u);var s=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;var c=String.fromCharCode.bind(String);var f=typeof Uint8Array.from==="function"?Uint8Array.from.bind(Uint8Array):function(e,t){if(t===void 0){t=function(e){return e}}return new Uint8Array(Array.prototype.slice.call(e,0).map(t))};var d=function(e){return e.replace(/=/g,"").replace(/[+\/]/g,function(e){return e=="+"?"-":"_"})};var l=function(e){return e.replace(/[^A-Za-z0-9\+\/]/g,"")};var g=function(e){var t,r,n,o,i="";var a=e.length%3;for(var s=0;s<e.length;){if((r=e.charCodeAt(s++))>255||(n=e.charCodeAt(s++))>255||(o=e.charCodeAt(s++))>255)throw new TypeError("invalid character found");t=(r<<16)|(n<<8)|o;i+=u[(t>>18)&63]+u[(t>>12)&63]+u[(t>>6)&63]+u[t&63]}return a?i.slice(0,a-3)+"===".substring(a):i};var p=t?function(e){return btoa(e)}:r?function(e){return Buffer.from(e,"binary").toString("base64")}:g;var h=r?function(e){return Buffer.from(e).toString("base64")}:function(e){var t=4096;var r=[];for(var n=0,o=e.length;n<o;n+=t){r.push(c.apply(null,e.subarray(n,n+t)))}return p(r.join(""))};var y=function(e,t){if(t===void 0){t=false}return t?d(h(e)):h(e)};var v=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?c(192|(t>>>6))+c(128|(t&63)):c(224|((t>>>12)&15))+c(128|((t>>>6)&63))+c(128|(t&63))}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return c(240|((t>>>18)&7))+c(128|((t>>>12)&63))+c(128|((t>>>6)&63))+c(128|(t&63))}};var m=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g;var b=function(e){return e.replace(m,v)};var A=r?function(e){return Buffer.from(e,"utf8").toString("base64")}:o?function(e){return h(o.encode(e))}:function(e){return p(b(e))};var w=function(e,t){if(t===void 0){t=false}return t?d(A(e)):A(e)};var O=function(e){return w(e,true)};var S=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g;var C=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18)|((63&e.charCodeAt(1))<<12)|((63&e.charCodeAt(2))<<6)|(63&e.charCodeAt(3)),r=t-65536;return c((r>>>10)+55296)+c((r&1023)+56320);case 3:return c(((15&e.charCodeAt(0))<<12)|((63&e.charCodeAt(1))<<6)|(63&e.charCodeAt(2)));default:return c(((31&e.charCodeAt(0))<<6)|(63&e.charCodeAt(1)))}};var P=function(e){return e.replace(S,C)};var N=function(e){e=e.replace(/\s+/g,"");if(!s.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));var t,r="",n,o;for(var i=0;i<e.length;){t=(a[e.charAt(i++)]<<18)|(a[e.charAt(i++)]<<12)|((n=a[e.charAt(i++)])<<6)|(o=a[e.charAt(i++)]);r+=n===64?c((t>>16)&255):o===64?c((t>>16)&255,(t>>8)&255):c((t>>16)&255,(t>>8)&255,t&255)}return r};var q=e?function(e){return atob(l(e))}:r?function(e){return Buffer.from(e,"base64").toString("binary")}:N;var U=r?function(e){return f(Buffer.from(e,"base64"))}:function(e){return f(q(e),function(e){return e.charCodeAt(0)})};var F=function(e){return U(B(e))};var x=r?function(e){return Buffer.from(e,"base64").toString("utf8")}:n?function(e){return n.decode(U(e))}:function(e){return P(q(e))};var B=function(e){return l(e.replace(/[-_]/g,function(e){return e=="-"?"+":"/"}))};var L=function(e){return x(B(e))};var E=function(e){if(typeof e!=="string")return false;var t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)};var R=function(e){return{value:e,enumerable:false,writable:true,configurable:true}};var D=function(){var e=function(e,t){return Object.defineProperty(String.prototype,e,R(t))};e("fromBase64",function(){return L(this)});e("toBase64",function(e){return w(this,e)});e("toBase64URI",function(){return w(this,true)});e("toBase64URL",function(){return w(this,true)});e("toUint8Array",function(){return F(this)})};var T=function(){var e=function(e,t){return Object.defineProperty(Uint8Array.prototype,e,R(t))};e("toBase64",function(e){return y(this,e)});e("toBase64URI",function(){return y(this,true)});e("toBase64URL",function(){return y(this,true)})};var M=function(){D();T()};var I={atob:q,atobPolyfill:N,btoa:p,btoaPolyfill:g,fromBase64:L,toBase64:w,encode:w,encodeURI:O,encodeURL:O,utob:b,btou:P,decode:L,isValid:E,fromUint8Array:y,toUint8Array:F,extendString:D,extendUint8Array:T,extendBuiltins:M};I.Base64={};Object.keys(I).forEach(function(e){return(I.Base64[e]=I[e])});$.base64=I})();function escapeAndUnescape(o,e){if(e===1||e===3){o=o.split("\n").join(" ");let t=[];let r=false;let n=0,e=o.length;for(;n<e;n++){let e=o.charAt(n);if(r&&e===r){if(o.charAt(n-1)!=="\\"){r=false}}else if(!r&&(e==='"'||e==="'")){r=e}else if(!r&&(e===" "||e==="\t")){e=""}t.push(e)}o=t.join("")}if(e===2||e===3){o=o.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')}if(e===4){o=o.replace(/\\\\/g,"\\").replace(/\\\"/g,'"')}return o}function stringToUnicode(r){let n="";for(let t=0;t<r.length;t++){let e=r.charCodeAt(t);if(!((e>=48&&e<=57)||(e>=65&&e<=90)||(e>=97&&e<=122)||e===32||(e>=33&&e<=47)||(e>=58&&e<=64)||(e>=91&&e<=96)||(e>=123&&e<=126))){e=e.toString(16).toUpperCase();while(e.length<4){e="0"+e}n+="\\\\u"+e.toLowerCase()}else{n+=r[t]}}return n}function removeHomePageSponsor(){let s=null;try{let i="";let a="";if($.request.url.indexOf("gql_para_POST?q=MultifeedQuery")<0){let e=$.response.body.match(/timing-HomePageLoadableQuery1-end.*\.push\("({.*?})"\);/);if(e){i=e[1];a=escapeAndUnescape(e[1],4)}}else{i=$.response.body;a=i}if(a){let e=JSON.parse(a);const u=e.data["multifeedObject"]["multifeedConnection"]["id"];let n=$.base64.decode(u).split(":");e.data["multifeedObject"]["multifeedConnection"]["edges"]=e.data["multifeedObject"]["multifeedConnection"]["edges"].filter((t)=>{let r=true;if(t.node["stories"]){for(let e=0;e<t.node["stories"].length;e++){if(t.node["stories"][e].hasOwnProperty("ad")){if(n.indexOf(t.cursor)>-1){n.splice(n.indexOf(t.cursor),1)}r=false;break}}}return r});let t="";const c=$.base64.encode(n.join(":"));e.data["multifeedObject"]["multifeedConnection"]["pageInfo"]["endCursor"]=n[n.length-1];if($.request.url.indexOf("gql_para_POST?q=MultifeedQuery")<0){t=stringToUnicode(escapeAndUnescape(JSON.stringify(e),3))}else{t=stringToUnicode(escapeAndUnescape(JSON.stringify(e),1))}let r=i.match(/\\"directSubscriptionYearlyPriceDollar\\":([\d.]+)/i);if(r){r=r[1];t=t.replace(/\\"directSubscriptionYearlyPriceDollar\\":([\d.]+)/,`\\"directSubscriptionYearlyPriceDollar\\":${r}`)}let o=i.match(/\\"directSubscriptionMonthlyPriceDollar\\":([\d.]+)/i);if(o){o=o[1];t=t.replace(/\\"directSubscriptionMonthlyPriceDollar\\":([\d.]+)/,`\\"directSubscriptionMonthlyPriceDollar\\":${o}`)}s={body:$.response.body.replace(i,t).replace(u,c)}}else{}}catch(e){}return s}function removeAnswerPageListAd(t=""){let r=null;try{if($.response.body){let e=JSON.parse(t||$.response.body);delete e["data"]["question"]["gptAd"];e["data"]["question"]["pagedListDataConnection"]["edges"]=e["data"]["question"]["pagedListDataConnection"]["edges"].filter((e)=>{return(!e.node.hasOwnProperty("ad")&&!e.node.hasOwnProperty("adLocation")&&!e.node["__typename"]!=="QuestionAdItem")});e["data"]["question"]["pagedListDataConnection"]["pageInfo"]["endCursor"]=e["data"]["question"]["pagedListDataConnection"]["edges"][e["data"]["question"]["pagedListDataConnection"]["edges"].length-1].cursor;const n=JSON.stringify(e);r={body:n}}}catch(e){}return r}function removeAnswerPageOtherListAd(){let t=null;try{if($.response.body){let e=$.response.body.match(/timing-PageLoadablePageWrapperQuery1-end.*\.push\("({.*?})"\);/);if(e){const r=e[1];const n=escapeAndUnescape(r,4);const o=removeAnswerPageListAd(n);if(o&&o["body"]){const i=stringToUnicode(escapeAndUnescape(o["body"],3));t={body:$.response.body.replace(r,i)}}}}}catch(e){}return t}function removeAnswerPageAd(){let t=null;try{if($.response.body){let e=JSON.parse($.response.body);delete e["data"]["answerModalAd"];const r=JSON.stringify(e);t={body:r}}else{}}catch(e){}return t}function removePostPageFooterAd(){let t=null;try{if($.response.body){let e=JSON.parse($.response.body);delete e["data"]["postModalAd"];const r=JSON.stringify(e);t={body:r}}else{}}catch(e){}return t}(()=>{let e=null;if($.isResponse){switch(true){case $.request.url==="https://www.quora.com/"||$.request.url==="https://www.quora.com/graphql/gql_para_POST?q=MultifeedQuery":e=removeHomePageSponsor();break;case/^https:\/\/www\.quora\.com\/graphql\/gql_para_POST\?q=AnswerPageFooterLoaderQuery/.test($.request.url):e=removeAnswerPageAd();break;case/^https:\/\/www\.quora\.com\/graphql\/gql_para_POST\?q=(QuestionAnswerPagedListQuery|QuestionPageLoadableBodyQuery)+/.test($.request.url):e=removeAnswerPageListAd();break;case/^https:\/\/www\.quora.com\/.*-.*/.test($.request.url):e=removeAnswerPageOtherListAd();break;case/^https:\/\/www\.quora\.com\/graphql\/gql_para_POST\?q=PostPageFooterLoaderQuery/.test($.request.url):e=removePostPageFooterAd();break;default:break}}if(e){$.done(e)}else{$.done()}})();function MagicJS(e="MagicJS",t="INFO"){const n=()=>{const e=typeof $loon!=="undefined";const t=typeof $task!=="undefined";const r=typeof module!=="undefined";const n=typeof $httpClient!=="undefined"&&!e;const o=typeof $storm!=="undefined";const i=typeof $environment!=="undefined"&&typeof $environment["stash-build"]!=="undefined";const a=n||e||o||i;const s=typeof importModule!=="undefined";return{isLoon:e,isQuanX:t,isNode:r,isSurge:n,isStorm:o,isStash:i,isSurgeLike:a,isScriptable:s,get name(){if(e){return"Loon"}else if(t){return"QuantumultX"}else if(r){return"NodeJS"}else if(n){return"Surge"}else if(s){return"Scriptable"}else{return"unknown"}},get build(){if(n){return $environment["surge-build"]}else if(i){return $environment["stash-build"]}else if(o){return $storm.buildVersion}},get language(){if(n||i){return $environment["language"]}},get version(){if(n){return $environment["surge-version"]}else if(i){return $environment["stash-version"]}else if(o){return $storm.appVersion}else if(r){return process.version}},get system(){if(n){return $environment["system"]}else if(r){return process.platform}},get systemVersion(){if(o){return $storm.systemVersion}},get deviceName(){if(o){return $storm.deviceName}}}};const o=(r,e="INFO")=>{let n=e;const o={SNIFFER:6,DEBUG:5,INFO:4,NOTIFY:3,WARNING:2,ERROR:1,CRITICAL:0,NONE:-1};const i={SNIFFER:"",DEBUG:"",INFO:"",NOTIFY:"",WARNING:"❗ ",ERROR:"❌ ",CRITICAL:"❌ ",NONE:""};const t=(e,t="INFO")=>{if(!(o[n]<o[t.toUpperCase()]))console.log(`[${t}][${r}]\n${i[t.toUpperCase()]}${e}\n`)};const a=(e)=>{n=e};return{getLevel:()=>{return n},setLevel:a,sniffer:(e)=>{t(e,"SNIFFER")},debug:(e)=>{t(e,"DEBUG")},info:(e)=>{t(e,"INFO")},notify:(e)=>{t(e,"NOTIFY")},warning:(e)=>{t(e,"WARNING")},error:(e)=>{t(e,"ERROR")},retry:(e)=>{t(e,"RETRY")}}};return new(class{constructor(e,t){this._startTime=Date.now();this.version="3.0.0";this.scriptName=e;this.env=n();this.logger=o(e,t);this.http=typeof MagicHttp==="function"?MagicHttp(this.env,this.logger):undefined;this.data=typeof MagicData==="function"?MagicData(this.env,this.logger):undefined;this.notification=typeof MagicNotification==="function"?MagicNotification(this.scriptName,this.env,this.logger,this.http):undefined;this.utils=typeof MagicUtils==="function"?MagicUtils(this.env,this.logger):undefined;this.qinglong=typeof MagicQingLong==="function"?MagicQingLong(this.env,this.data,this.logger):undefined;if(typeof this.data!=="undefined"){let e=this.data.read("magic_loglevel");const r=this.data.read("magic_bark_url");if(e){this.logger.setLevel(e.toUpperCase())}if(r){this.notification.setBark(r)}}}get isRequest(){return typeof $request!=="undefined"&&typeof $response==="undefined"}get isResponse(){return typeof $response!=="undefined"}get isDebug(){return this.logger.level==="DEBUG"}get request(){return typeof $request!=="undefined"?$request:undefined}get response(){if(typeof $response!=="undefined"){if($response.hasOwnProperty("status"))$response["statusCode"]=$response["status"];if($response.hasOwnProperty("statusCode"))$response["status"]=$response["statusCode"];return $response}else{return undefined}}done=(e={})=>{this._endTime=Date.now();let t=(this._endTime-this._startTime)/1e3;this.logger.debug(`SCRIPT COMPLETED:${t}S.`);if(typeof $done!=="undefined"){$done(e)}}})(e,t)}